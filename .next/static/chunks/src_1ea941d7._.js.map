{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\n\ninterface User {\n  id: string;\n  name: string;\n  role: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    // Check session on mount\n    async function checkSession() {\n      try {\n        const res = await fetch(\"/api/auth/session\");\n        if (res.ok) {\n          const data = await res.json();\n          if (data.user) {\n            setUser(data.user);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch {\n        setUser(null);\n      }\n    }\n    checkSession();\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    const res = await fetch(\"/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ email, password }),\n    });\n    if (res.ok) {\n      const data = await res.json();\n      setUser(data.user);\n    } else {\n      throw new Error(\"Login failed\");\n    }\n  };\n\n  const logout = async () => {\n    const res = await fetch(\"/api/auth/logout\", { method: \"POST\" });\n    if (res.ok) {\n      setUser(null);\n    } else {\n      throw new Error(\"Logout failed\");\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAgBA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAE9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,yBAAyB;YACzB,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAAM;oBACxB,IAAI,IAAI,EAAE,EAAE;wBACV,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,IAAI,KAAK,IAAI,EAAE;4BACb,QAAQ,KAAK,IAAI;wBACnB,OAAO;4BACL,QAAQ;wBACV;oBACF,OAAO;wBACL,QAAQ;oBACV;gBACF,EAAE,OAAM;oBACN,QAAQ;gBACV;YACF;YACA;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,MAAM,MAAM,MAAM,mBAAmB;YACzC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QACA,IAAI,IAAI,EAAE,EAAE;YACV,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,KAAK,IAAI;QACnB,OAAO;YACL,MAAM,IAAI,MAAM;QAClB;IACF;IAEA,MAAM,SAAS;QACb,MAAM,MAAM,MAAM,MAAM,oBAAoB;YAAE,QAAQ;QAAO;QAC7D,IAAI,IAAI,EAAE,EAAE;YACV,QAAQ;QACV,OAAO;YACL,MAAM,IAAI,MAAM;QAClB;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;QAAO;kBAChD;;;;;;AAGP;GArDgB;KAAA;AAuDT,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/NavBar.tsx"],"sourcesContent":["\"use client\";\n\n\"use client\";\n\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useAuth } from '../context/AuthContext';\n\nexport default function NavBar() {\n  const router = useRouter();\n  const { user, logout } = useAuth();\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      router.push('/auth/login');\n    } catch (error) {\n      console.error('Error al cerrar sesión:', error);\n    }\n  };\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-white shadow-sm\">\n      <div className=\"container\">\n        <Link \n          href=\"/inicio\"\n          className=\"navbar-brand fw-bold\"\n        >\n          Juegos de Mesa\n        </Link>\n\n        <div className=\"d-flex align-items-center\">\n          {user?.role === 'admin' && (\n            <>\n              <Link\n                href=\"/products\"\n                className=\"nav-link px-3\"\n              >\n                Gestionar Juegos\n              </Link>\n              <Link\n                href=\"/products/new\"\n                className=\"nav-link px-3\"\n              >\n                Agregar Juego\n              </Link>\n              <button\n                onClick={handleLogout}\n                className=\"btn btn-danger ms-3\"\n              >\n                Cerrar Sesión\n              </button>\n            </>\n          )}\n          {user?.role === 'user' && (\n            <>\n              <Link\n                href=\"/cart\"\n                className=\"nav-link px-3\"\n              >\n                Ver Carrito\n              </Link>\n              <button\n                onClick={handleLogout}\n                className=\"btn btn-danger ms-3\"\n              >\n                Cerrar Sesión\n              </button>\n            </>\n          )}\n          {!user && (\n            <div className=\"d-flex align-items-center\">\n              <Link\n                href=\"/catalogo\"\n                className=\"nav-link px-3\"\n              >\n                Catálogo\n              </Link>\n              <Link\n                href=\"/auth/login\"\n                className=\"btn btn-primary ms-3\"\n              >\n                Iniciar Sesión\n              </Link>\n            </div>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AACA;AACA;;;AANA;AAEA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAE/B,MAAM,eAAe;QACnB,IAAI;YACF,MAAM;YACN,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,+JAAA,CAAA,UAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;8BAID,6LAAC;oBAAI,WAAU;;wBACZ,MAAM,SAAS,yBACd;;8CACE,6LAAC,+JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC,+JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;wBAKJ,MAAM,SAAS,wBACd;;8CACE,6LAAC,+JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;wBAKJ,CAAC,sBACA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,+JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC,+JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GAlFwB;;QACP,qIAAA,CAAA,YAAS;QACC,iIAAA,CAAA,UAAO;;;KAFV","debugId":null}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/client-layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { ReactNode } from \"react\";\nimport { AuthProvider } from \"../context/AuthContext\";\nimport NavBar from \"../components/NavBar\";\n\nexport default function ClientLayout({ children }: { children: ReactNode }) {\n  return (\n    <AuthProvider>\n      <NavBar />\n      <main className=\"container py-4\">{children}</main>\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMe,SAAS,aAAa,EAAE,QAAQ,EAA2B;IACxE,qBACE,6LAAC,iIAAA,CAAA,eAAY;;0BACX,6LAAC,+HAAA,CAAA,UAAM;;;;;0BACP,6LAAC;gBAAK,WAAU;0BAAkB;;;;;;;;;;;;AAGxC;KAPwB","debugId":null}}]
}